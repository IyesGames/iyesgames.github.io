<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Per-Plid cache of game state"><title>mw_app::view - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="mw_app" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0 (cc66ad468 2023-10-03)" data-channel="1.73.0" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-1596385f77d47ef2.css" data-theme-dark-css="dark-0a43001d3fc2282c.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-1596385f77d47ef2.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-0a43001d3fc2282c.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../mw_app/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../mw_app/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module view</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">mw_app</a>::<wbr><a class="mod" href="#">view</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/mw_app/view.rs.html#1-334">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Per-Plid cache of game state</p>
<p>A “view” is a compact representation of the game state of the entire map,
from the point of view of a given player. This is how the game client stores
the data it receives from the server, regardless of whether it is currently
displayed.</p>
<p>This abstraction is useful in situations where the game client can view (or
even play as) multiple different Plids on the server. For example, when
spectating, you have the global spectator view, but can also switch to viewing
any player in the game, the way they see the world. In Playground mode, the
user can control any Plid. In the future, we might have gameplay that allows
one player to view the world as seen by another player.</p>
<p>Therefore, the client needs to keep/accumulate game state for each Plid
that it is capable of showing to the user. In a normal game, there will be
only one view: that of the user’s own Plid. The server will not even send
data for other players (to prevent cheating). But in the aforementioned
game modes, the client will receive data for multiple plids simultaneously,
and needs to retain it somehow, so that the user can switch between
different views when they desire.</p>
<p>The game state is stored compactly, using a bit-field representation per-tile.
One entity per view.</p>
<p>The currently active view is rendered by spawning an actual ECS representation
of the map. See the [<code>map</code>][mw_common::map] module for that. Those are the entities
that are used for actual gameplay and graphics purposes.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DespawnOnViewSwitch.html" title="struct mw_app::view::DespawnOnViewSwitch">DespawnOnViewSwitch</a></div><div class="desc docblock-short">Marker for entities that should be discarded on view switch.</div></li><li><div class="item-name"><a class="struct" href="struct.GameViewPlugin.html" title="struct mw_app::view::GameViewPlugin">GameViewPlugin</a></div></li><li><div class="item-name"><a class="struct" href="struct.PlidViewing.html" title="struct mw_app::view::PlidViewing">PlidViewing</a></div><div class="desc docblock-short">The currently active view – what is displayed to the user.</div></li><li><div class="item-name"><a class="struct" href="struct.ViewBundle.html" title="struct mw_app::view::ViewBundle">ViewBundle</a></div><div class="desc docblock-short">Bundle for a view entity</div></li><li><div class="item-name"><a class="struct" href="struct.ViewMapData.html" title="struct mw_app::view::ViewMapData">ViewMapData</a></div><div class="desc docblock-short">The map data of a view</div></li><li><div class="item-name"><a class="struct" href="struct.ViewSwitchSet.html" title="struct mw_app::view::ViewSwitchSet">ViewSwitchSet</a></div><div class="desc docblock-short">All systems that run whenever a view switch is triggered, are in this set.</div></li><li><div class="item-name"><a class="struct" href="struct.ViewTileData.html" title="struct mw_app::view::ViewTileData">ViewTileData</a></div><div class="desc docblock-short">The per-tile data of a view.</div></li><li><div class="item-name"><a class="struct" href="struct.ViewUpdateSet.html" title="struct mw_app::view::ViewUpdateSet">ViewUpdateSet</a></div></li><li><div class="item-name"><a class="struct" href="struct.VisibleInView.html" title="struct mw_app::view::VisibleInView">VisibleInView</a></div><div class="desc docblock-short">Marker for entities that should be shown in a specific view and hidden in other views.</div></li></ul></section></div></main></body></html>