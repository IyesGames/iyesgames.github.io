<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Map: Cities and Geography - MineWars</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="../foss.html"><strong aria-hidden="true">2.</strong> Open-Source Builds</a></li><li class="chapter-item expanded "><a href="../game-design.html"><strong aria-hidden="true">3.</strong> Game Design</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../audience.html"><strong aria-hidden="true">3.1.</strong> Target Audience</a></li><li class="chapter-item expanded "><a href="../gameplay.html"><strong aria-hidden="true">3.2.</strong> Gameplay and Rules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../gameplay/map.html" class="active"><strong aria-hidden="true">3.2.1.</strong> The Map: Cities and Geography</a></li><li class="chapter-item expanded "><a href="../gameplay/territory.html"><strong aria-hidden="true">3.2.2.</strong> Territory and Ownership</a></li><li class="chapter-item expanded "><a href="../gameplay/economy.html"><strong aria-hidden="true">3.2.3.</strong> Economy</a></li><li class="chapter-item expanded "><a href="../gameplay/pvp.html"><strong aria-hidden="true">3.2.4.</strong> PvP Combat</a></li><li class="chapter-item expanded "><a href="../gameplay/actions.html"><strong aria-hidden="true">3.2.5.</strong> All Gameplay Actions</a></li><li class="chapter-item expanded "><a href="../gameplay/items.html"><strong aria-hidden="true">3.2.6.</strong> Items</a></li><li class="chapter-item expanded "><a href="../gameplay/structures.html"><strong aria-hidden="true">3.2.7.</strong> Structures</a></li></ol></li><li class="chapter-item expanded "><a href="../ideas.html"><strong aria-hidden="true">3.3.</strong> More Ideas to Explore</a></li><li class="chapter-item expanded "><a href="../gamemodes.html"><strong aria-hidden="true">3.4.</strong> Game Modes</a></li></ol></li><li class="chapter-item expanded "><a href="../mgmt.html"><strong aria-hidden="true">4.</strong> Project Planning</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../mgmt/monetization.html"><strong aria-hidden="true">4.1.</strong> Monetization Ideas</a></li><li class="chapter-item expanded "><a href="../mgmt/settings.html"><strong aria-hidden="true">4.2.</strong> Game Settings</a></li><li class="chapter-item expanded "><a href="../achievements.html"><strong aria-hidden="true">4.3.</strong> Achievement Ideas</a></li><li class="chapter-item expanded "><a href="../mgmt/philosophy.html"><strong aria-hidden="true">4.4.</strong> Notes / Philosophy</a></li></ol></li><li class="chapter-item expanded "><a href="../tech.html"><strong aria-hidden="true">5.</strong> Technical Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../tech/dataformat-player.html"><strong aria-hidden="true">5.1.</strong> Player Stream Format</a></li><li class="chapter-item expanded "><a href="../tech/dataformat-spectator.html"><strong aria-hidden="true">5.2.</strong> Spectator/Replay Stream Format</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MineWars</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-map-cities-and-geography"><a class="header" href="#the-map-cities-and-geography">The Map: Cities and Geography</a></h1>
<p>Every game session/match happens on a new, procedurally-generated map.</p>
<h2 id="map-geography"><a class="header" href="#map-geography">Map Geography</a></h2>
<p>The game map is a procedurally-generated fully-contiguous island/continent.</p>
<p>There are several types of tiles:</p>
<p><strong>Water</strong> is everything outside of the playable area. Non-interactive.</p>
<p><strong>Land</strong> is an interactive tile, forming the playable area.</p>
<p><strong>Fertile Land</strong> gives extra resources. Otherwise, it plays like <strong>Land</strong>.</p>
<p><strong>Foundation</strong> is a land tile that has been used up by the player (via
harvesting or construction).  This tile generates no resources. Otherwise, it
plays like <strong>Land</strong>.</p>
<p><strong>Destroyed Land</strong> is a tile where an explosion has occured (from a mine or strike).
Once a tile is converted into destroyed land, it generates no resources for the
remainder of the game.  Otherwise, it plays like <strong>Land</strong>.</p>
<p><strong>Mountains</strong> and <strong>Forests</strong> are generated in random clusters of multiple
adjacent tiles. They can only be captured as an entire cluster. They give large
amounts of resources when owned by players. No gameplay actions can happen on
these tiles, and they do not display digits.</p>
<h3 id="generation"><a class="header" href="#generation">Generation</a></h3>
<p>The whole playable area must be contiguous. Everything outside of the playable
area is Water.</p>
<p>Rivers can be generated by tracing a path of water tiles, starting from a random
location, going outwards to be joined into the water that surrounds the playable
area.</p>
<p>Lakes/Mountains/Forests, can be generated by creating small clusters of
water/mountain/forest tiles.</p>
<p>Land next to Water can be converted to Fertile Land.</p>
<h2 id="cities"><a class="header" href="#cities">Cities</a></h2>
<p>At map generation time, a number of <strong>cities</strong> are placed randomly. The
generation algorithm aims to position them in diverse geographical locations,
with a large distance between cities.</p>
<p>All tiles adjacent to the city tile must be playable <strong>land</strong>, cities cannot
be located next to <strong>mountains</strong>, <strong>forests</strong>, or <strong>water</strong>.</p>
<p>The location of cities, and a visualization of the extents of their regions, is
always visible to all players, even behind fog of war. Everyone knows how many
cities each player owns at all times -- it is important to judge the progression
of the game and to plan strategies. The exact cities (who owns what cities) is
not known, except for neighboring regions.</p>
<p>Every player knows the <strong>owner</strong> and an estimation of the <strong>money</strong> of foreign
cities in regions neighboring the regions that are controlled by the player.</p>
<h3 id="starting-cities"><a class="header" href="#starting-cities">Starting Cities</a></h3>
<p>Given the random nature of the map, it is important that players are not left
feeling like they (or another player) got an unfair spawn location.</p>
<p>Because of this, we need a solution to give players some agency over the
randomness, to prevent someone spawning with a large unfair advantage.</p>
<p>Current proposal:</p>
<h4 id="ban-stage-no-pick"><a class="header" href="#ban-stage-no-pick">Ban Stage (no pick)</a></h4>
<p>At the start of the session, before the game begins, there is a ban stage.</p>
<p>Players are shown an overview of the map and all the city locations.</p>
<p>Players are given <strong>15</strong> seconds to place a <strong>vote</strong> for <strong>up to 2</strong> cities.</p>
<p>The votes are revealed to other players after the time elapses.</p>
<p>The highest-voted city is <strong>banned</strong>. Nobody will spawn there.</p>
<p>If a player does nothing during this stage, they just do not contribute
any votes. If all players do nothing, no cities get banned.</p>
<p>The process may be repeated multiple times depending on game mode, to ban
multiple cities.</p>
<p>Spawn locations are picked randomly from the remaining cities.</p>
<h2 id="regions"><a class="header" href="#regions">Regions</a></h2>
<p>Each tile on the map is associated with a city. All tiles that are associated
with a given city are collectively known as that city's <strong>region</strong>. The region
is the city's &quot;area of responsibility&quot;.</p>
<p>The city's resource points are accumulated from all the tiles in its region that
are owned by the same player that owns the city. The city generates <strong>income</strong>
for the player, based on the amount of available resources.</p>
<p>Regions are generated with the map, ahead of time, and cannot change during the
course of a game.</p>
<h3 id="out-of-region-vs-in-region-gameplay"><a class="header" href="#out-of-region-vs-in-region-gameplay">Out-of-region vs. In-region gameplay</a></h3>
<p>In foreign regions (where the player does not own the city):</p>
<ul>
<li>owned tiles do not generate resources</li>
<li>disconnected (non-contiguous) land ownership is not allowed</li>
</ul>
<h3 id="generation-1"><a class="header" href="#generation-1">Generation</a></h3>
<p>Due to the randomness and geographical diversity of the map, some cities will
naturally be considered more attractive to players, which could lead to power
imbalances. To counteract this, the map generation algorithm strives to keep
cities balanced in resource availablitity. Regions will be computed so that
similar amounts of total resources are available in each region.</p>
<p>The algorithm starts from the location of each city and gradually expands the
region in the area around it, similar to a &quot;floodfill&quot; or &quot;breadth-first-search&quot;
algorithm, until every playable tile on the map has been assigned to a city. At
every iteration of the loop, the region with the fewest total available
resources is selected for expansion.</p>
<p>When there are multiple candidate tiles (the search frontier),
they are prioritized as follows:</p>
<ol>
<li>Any Fertile Land tiles, sorted by farthest distance from other cities</li>
<li>Any ResClusters (Mountain/Forest), sorted by closest distance to the city</li>
<li>Any Regular (or other) land, sorted by farthest distance from other cities</li>
</ol>
<p><strong>Land</strong> tiles are assigned one-at-a-time. <strong>Mountain</strong>/<strong>Forest</strong> tiles are
assigned as a whole cluster (clusters are never split between regions).</p>
<h2 id="starting-mines-and-decoys"><a class="header" href="#starting-mines-and-decoys">Starting Mines and Decoys</a></h2>
<p>On world generation, a large number of mines and decoys are randomly scattered
around the map, in all the neutral unexplored areas. Other items are not generated.</p>
<p>This serves to impede the initial expansion of players' territories. It also
allows players to capture them, giving precious money, while their cities'
income is still rather low due to a lack of territory.</p>
<p>The early-game stage of MineWars, before encountering another player, is hence
more like a glorified single-player minesweeper experience, as each player tries
to form some initial territory and prepare for their first PvP encounter, while
being mindful and trying to figure out the randomly-placed initial mines.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../gameplay.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../gameplay/territory.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../gameplay.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../gameplay/territory.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
